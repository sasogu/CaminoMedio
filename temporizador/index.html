<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temporizador de Meditación</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="timer-container">
        <div class="background-white">
        <!-- Barra de progreso circular -->
        <div class="progress-container">
            <svg class="progress-ring" width="400" height="400" viewBox="0 0 100 100">
                <defs>
                    <linearGradient id="ensoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#555" stop-opacity="0.9" />
                        <stop offset="100%" stop-color="#333" stop-opacity="0.5" />
                    </linearGradient>
                </defs>
                <circle
                    class="progress-ring__circle"
                    cx="50"
                    cy="50"
                    r="35"
                    stroke="url(#ensoGradient)"
                    stroke-width="16"
                    fill="none"
                    stroke-linecap="round"
                ></circle>
            </svg>
            <div id="time" aria-live="polite" aria-atomic="true">00:00</div>
        </div>

        <div class="time-controls">
            <button class="time-button" id="decrease-time" onclick="adjustTime(-10)" aria-label="Restar 10 minutos">
                <i class="fas fa-minus-circle"></i> <!-- Icono de restar -->
            </button>
            <label for="minutes" class="visually-hidden">Minutos</label>
            <input type="number" id="minutes" placeholder="Introduce minutos" min="1" max="60" inputmode="numeric" aria-describedby="minutes-help">
            <span id="minutes-help" class="visually-hidden">Introduce minutos entre 1 y 60</span>
            <button class="time-button" id="increase-time" onclick="adjustTime(10)" aria-label="Sumar 10 minutos">
                <i class="fas fa-plus-circle"></i> <!-- Icono de sumar -->
            </button>
        </div>
        <button class="start" id="start-button" onclick="startTimer()">Iniciar</button>
        <button class="stop hidden" id="stop-button" onclick="stopTimer()">Detener</button>
        <br>
        <br>
         <!-- LOGO-->
        
        <div class="logo-container">
            <img id="logo" src="../assets/img/logonegro.png" alt="Logo Camino Medio">
        </div>
        <h1 id="title">Comunidad Soto Zen Camino Medio</h1>

        <!-- Botón para ir a guardar.html -->
       
        <div> <a href="estadisticas.html" id="estadisticas-button" class="button">Estadísticas</a></div>
        <a href="guardar.html" id="save-button" class="button">Configurar</a>
        <br>
        <div> <a href="../index.html" id="caminomedio-button" class="button">Volver</a></div>
        <div id="quote"></div>
        
    </div>
    
</div>


<!-- Botón para ir a guardar.html -->

    <!-- Sonidos -->
    <audio id="start-sound" src="multimedia/start.mp3" preload="auto"></audio>
    <audio id="end-sound" src="multimedia/end.mp3" preload="auto"></audio>

   
    <script type="module" src="js/script.js"></script>
    <script>
      // Aplicar tema desde preferencia guardada (oscuro por defecto)
      (function() {
        try {
          const pref = localStorage.getItem('modoOscuro');
          const oscuro = (pref === '1' || pref === null);
          if (pref === null) localStorage.setItem('modoOscuro', '1');
          document.addEventListener('DOMContentLoaded', function(){
            document.body.classList.toggle('dark-mode', oscuro);
          });
        } catch (e) {}
      })();
    </script>
    <script>
      // Ajustar logo según el tema: oscuro -> logo blanco; claro -> logo negro
      (function(){
        function applyLogo(){
          try {
            var pref = localStorage.getItem('modoOscuro');
            var oscuro = (pref === '1' || pref === null);
            var logo = document.getElementById('logo');
            if (logo) logo.src = oscuro ? '../assets/img/logoblanco.png' : '../assets/img/logonegro.png';
          } catch(e) {}
        }
        document.addEventListener('DOMContentLoaded', applyLogo);
      })();
    </script>
    
    <script>
        // Función para solicitar pantalla completa
        function requestFullscreen() {
            const body = document.body;
            if (body.requestFullscreen) {
                return body.requestFullscreen();
            } else if (body.mozRequestFullScreen) { // Soporte para Firefox
                return body.mozRequestFullScreen();
            } else if (body.webkitRequestFullscreen) { // Soporte para navegadores Webkit (Safari, etc.)
                return body.webkitRequestFullscreen();
            } else if (body.msRequestFullscreen) { // Soporte para IE/Edge
                return body.msRequestFullscreen();
            } else {
                console.error('Pantalla completa no soportada en este navegador.');
                return Promise.reject('Pantalla completa no soportada en este navegador.');
            }
        }

        // Solicitar pantalla completa en respuesta a una acción del usuario
        document.addEventListener('DOMContentLoaded', (event) => {
            document.body.addEventListener('click', () => {
                requestFullscreen().catch(err => {
                    console.error('Error al solicitar pantalla completa:', err);
                });
            }, { once: true }); // Asegurarse de que solo se ejecute una vez
        });
    </script>

    <style>
      .visually-hidden {
        position: absolute !important;
        width: 1px; height: 1px;
        padding: 0; margin: -1px;
        overflow: hidden; clip: rect(0, 0, 0, 0);
        white-space: nowrap; border: 0;
      }
      /* clase utilitaria para etiquetas ocultas accesibles */
    </style>

</body>
</html>
